<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DreamSeed - Natural Voice Conversation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        
        .container {
            background: rgba(255,255,255,0.1);
            padding: 40px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            text-align: center;
        }
        
        .call-button {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            border: none;
            font-size: 4em;
            cursor: pointer;
            margin: 30px;
            transition: all 0.3s ease;
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
        }
        
        .call-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 50px rgba(0,0,0,0.4);
        }
        
        .call-button.active {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .status {
            font-size: 1.5em;
            margin: 30px 0;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .voice-indicator {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin: 20px 0;
        }
        
        .voice-bar {
            width: 6px;
            height: 30px;
            background: rgba(255,255,255,0.3);
            border-radius: 3px;
            transition: all 0.1s ease;
        }
        
        .voice-bar.active {
            background: #3498db;
            animation: bounce 0.6s infinite alternate;
        }
        
        @keyframes bounce {
            0% { height: 30px; }
            100% { height: 50px; }
        }
        
        .conversation-log {
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 15px;
            margin: 30px 0;
            text-align: left;
            max-height: 400px;
            overflow-y: auto;
            display: none;
        }
        
        .message {
            margin: 15px 0;
            padding: 12px;
            border-radius: 10px;
            animation: fadeIn 0.5s ease;
        }
        
        .user-msg {
            background: rgba(52, 152, 219, 0.3);
            margin-left: 30px;
        }
        
        .ai-msg {
            background: rgba(39, 174, 96, 0.3);
            margin-right: 30px;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🎤 Natural Voice Assistant</h1>
        <p>Just start talking - like Siri or Alexa!</p>
        
        <button class="call-button" id="callButton">📞</button>
        
        <div class="status" id="status">
            Click to start conversation
        </div>
        
        <div class="voice-indicator" id="voiceIndicator">
            <div class="voice-bar"></div>
            <div class="voice-bar"></div>
            <div class="voice-bar"></div>
            <div class="voice-bar"></div>
            <div class="voice-bar"></div>
            <div class="voice-bar"></div>
            <div class="voice-bar"></div>
            <div class="voice-bar"></div>
        </div>
        
        <div class="conversation-log" id="conversationLog">
            <div class="ai-msg">
                <strong>AI:</strong> Hello! I'm your DreamSeed business consultant. I can help you with LLC formation, business planning, and getting started. What would you like to know?
            </div>
        </div>
    </div>

    <script>
        let isCallActive = false;
        let isListening = false;
        let recognition = null;
        let synth = null;
        let conversationActive = false;
        
        // Get elements
        const callButton = document.getElementById('callButton');
        const status = document.getElementById('status');
        const voiceIndicator = document.getElementById('voiceIndicator');
        const conversationLog = document.getElementById('conversationLog');
        const voiceBars = document.querySelectorAll('.voice-bar');
        
        // Initialize speech recognition and synthesis
        function initializeSpeech() {
            // Speech Recognition (Speech-to-Text)
            if ('webkitSpeechRecognition' in window) {
                recognition = new webkitSpeechRecognition();
                recognition.continuous = true;
                recognition.interimResults = true;
                recognition.lang = 'en-US';
                
                recognition.onstart = () => {
                    isListening = true;
                    updateStatus('🎤 Listening... speak naturally');
                    animateVoiceBars(true);
                };
                
                recognition.onresult = (event) => {
                    let finalTranscript = '';
                    for (let i = event.resultIndex; i < event.results.length; i++) {
                        if (event.results[i].isFinal) {
                            finalTranscript += event.results[i][0].transcript;
                        }
                    }
                    
                    if (finalTranscript) {
                        handleUserSpeech(finalTranscript);
                    }
                };
                
                recognition.onerror = (event) => {
                    console.error('Speech recognition error:', event.error);
                    updateStatus('❌ Speech recognition error. Try again.');
                    animateVoiceBars(false);
                };
                
                recognition.onend = () => {
                    if (conversationActive) {
                        // Restart recognition to keep listening
                        setTimeout(() => {
                            if (conversationActive && !isListening) {
                                recognition.start();
                            }
                        }, 500);
                    }
                };
            }
            
            // Speech Synthesis (Text-to-Speech)
            synth = window.speechSynthesis;
        }
        
        function updateStatus(message) {
            status.textContent = message;
        }
        
        function animateVoiceBars(active) {
            voiceBars.forEach((bar, index) => {
                if (active) {
                    setTimeout(() => {
                        bar.classList.add('active');
                    }, index * 100);
                } else {
                    bar.classList.remove('active');
                }
            });
        }
        
        function addMessage(text, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-msg' : 'ai-msg'}`;
            messageDiv.innerHTML = `<strong>${isUser ? 'You' : 'AI'}:</strong> ${text}`;
            conversationLog.appendChild(messageDiv);
            conversationLog.scrollTop = conversationLog.scrollHeight;
        }
        
        function handleUserSpeech(transcript) {
            updateStatus('🤖 AI is thinking...');
            animateVoiceBars(false);
            isListening = false;
            
            // Add user message
            addMessage(transcript, true);
            
            // Generate AI response
            setTimeout(() => {
                generateAIResponse(transcript);
            }, 1000);
        }
        
        function generateAIResponse(userText) {
            // Simple AI responses based on keywords
            let aiResponse = '';
            
            const lowerText = userText.toLowerCase();
            
            if (lowerText.includes('llc') || lowerText.includes('business') || lowerText.includes('company')) {
                const llcResponses = [
                    "Great! LLCs are excellent for new businesses. They provide liability protection and tax flexibility. What type of business are you starting?",
                    "Perfect choice! An LLC protects your personal assets and offers simple tax filing. What state do you want to incorporate in?",
                    "LLCs are very popular! They're easy to maintain and provide good protection. Do you have a business name picked out?",
                    "Excellent! For your LLC, you'll need to choose a state, pick a name, and file Articles of Organization. I can help with all of that!"
                ];
                aiResponse = llcResponses[Math.floor(Math.random() * llcResponses.length)];
            } else if (lowerText.includes('cost') || lowerText.includes('price') || lowerText.includes('fee')) {
                aiResponse = "Our LLC formation packages start at $299 for basic formation, $599 for premium with EIN and operating agreement, or $999 for full-service with legal review. Which sounds right for you?";
            } else if (lowerText.includes('state')) {
                aiResponse = "Popular states for LLCs include Delaware for businesses, Nevada for privacy, or your home state for simplicity. Each has different benefits. Where are you located?";
            } else if (lowerText.includes('name')) {
                aiResponse = "Your LLC name must be unique in your state and include 'LLC' or 'Limited Liability Company'. I can help you check name availability. What name did you have in mind?";
            } else if (lowerText.includes('hello') || lowerText.includes('hi')) {
                aiResponse = "Hello! I'm excited to help you start your business. What kind of company are you thinking about forming?";
            } else {
                aiResponse = "That's a great question! For business formation, I typically help with LLCs, corporations, and partnerships. Tell me more about what you're looking to start.";
            }
            
            // Add AI response
            addMessage(aiResponse, false);
            
            // Speak the response
            speakText(aiResponse);
        }
        
        function speakText(text) {
            if (synth) {
                updateStatus('🔊 AI is speaking...');
                
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.rate = 0.9;
                utterance.pitch = 1;
                utterance.volume = 1;
                
                utterance.onend = () => {
                    updateStatus('🎤 Your turn - speak naturally');
                    if (conversationActive) {
                        // Resume listening after AI finishes speaking
                        setTimeout(() => {
                            if (conversationActive && recognition) {
                                recognition.start();
                            }
                        }, 500);
                    }
                };
                
                synth.speak(utterance);
            }
        }
        
        // Call button click
        callButton.addEventListener('click', function() {
            if (!isCallActive) {
                // Start conversation
                startConversation();
            } else {
                // End conversation
                endConversation();
            }
        });
        
        function startConversation() {
            initializeSpeech();
            
            if (!recognition) {
                updateStatus('❌ Speech recognition not supported in this browser');
                return;
            }
            
            isCallActive = true;
            conversationActive = true;
            callButton.classList.add('active');
            callButton.textContent = '📞';
            conversationLog.style.display = 'block';
            
            updateStatus('🎤 Starting conversation...');
            
            // Start with AI greeting
            const greeting = "Hello! I'm your DreamSeed business consultant. I can help you with LLC formation, business planning, and getting started. What would you like to know?";
            speakText(greeting);
        }
        
        function endConversation() {
            conversationActive = false;
            isCallActive = false;
            isListening = false;
            
            callButton.classList.remove('active');
            callButton.textContent = '📞';
            
            if (recognition) {
                recognition.stop();
            }
            
            if (synth) {
                synth.cancel();
            }
            
            animateVoiceBars(false);
            updateStatus('✅ Conversation ended. Click to start again.');
            
            addMessage('Thank you for using DreamSeed! Feel free to start a new conversation anytime.', false);
        }
        
        // Initialize
        updateStatus('Click to start a natural voice conversation');
        
        // Check browser support
        if (!('webkitSpeechRecognition' in window)) {
            updateStatus('❌ Voice recognition not supported. Please use Chrome or Edge.');
            callButton.disabled = true;
        }
    </script>

    <!-- DreamSeed Unified Navigation -->
    <script src="/components/unified-header.js"></script>
</body>
</html>