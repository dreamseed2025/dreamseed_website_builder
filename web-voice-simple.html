<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DreamSeed - Simple Voice Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #2c3e50;
            color: white;
            text-align: center;
        }
        
        .big-button {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            border: none;
            font-size: 3em;
            cursor: pointer;
            margin: 20px;
            transition: all 0.2s ease;
        }
        
        .start-btn {
            background: #27ae60;
            color: white;
        }
        
        .record-btn {
            background: #3498db;
            color: white;
        }
        
        .stop-btn {
            background: #e74c3c;
            color: white;
        }
        
        .big-button:hover {
            transform: scale(1.1);
        }
        
        .status {
            margin: 20px 0;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <h1>üé§ Simple Voice Test</h1>
    
    <!-- Start Screen -->
    <div id="start-screen">
        <button class="big-button start-btn" id="start-btn">üé§</button>
        <p>Click to start</p>
    </div>
    
    <!-- Recording Screen -->
    <div id="record-screen" class="hidden">
        <button class="big-button record-btn" id="record-btn">üî¥</button>
        <button class="big-button stop-btn" id="stop-btn">‚ùå</button>
        <p>üî¥ Record | ‚ùå Stop</p>
    </div>
    
    <div class="status" id="status">Ready</div>
    
    <script>
        let isRecording = false;
        let mediaRecorder = null;
        let stream = null;
        
        // Get elements
        const startScreen = document.getElementById('start-screen');
        const recordScreen = document.getElementById('record-screen');
        const status = document.getElementById('status');
        const startBtn = document.getElementById('start-btn');
        const recordBtn = document.getElementById('record-btn');
        const stopBtn = document.getElementById('stop-btn');
        
        function updateStatus(msg) {
            status.textContent = msg;
            console.log(msg);
        }
        
        // Start button click
        startBtn.addEventListener('click', async function() {
            updateStatus('Requesting microphone...');
            try {
                stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                updateStatus('‚úÖ Microphone ready!');
                
                startScreen.classList.add('hidden');
                recordScreen.classList.remove('hidden');
                
            } catch (error) {
                updateStatus('‚ùå Microphone failed: ' + error.message);
            }
        });
        
        // Record button click
        recordBtn.addEventListener('click', function() {
            if (!isRecording) {
                updateStatus('üî¥ Recording...');
                mediaRecorder = new MediaRecorder(stream);
                mediaRecorder.start();
                isRecording = true;
                recordBtn.textContent = '‚èπÔ∏è';
                recordBtn.style.background = '#e67e22';
            } else {
                updateStatus('‚èπÔ∏è Stopped recording');
                mediaRecorder.stop();
                isRecording = false;
                recordBtn.textContent = 'üî¥';
                recordBtn.style.background = '#3498db';
            }
        });
        
        // Stop button click
        stopBtn.addEventListener('click', function() {
            updateStatus('‚ùå Ending session...');
            
            if (isRecording && mediaRecorder) {
                mediaRecorder.stop();
            }
            
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
                stream = null;
            }
            
            isRecording = false;
            startScreen.classList.remove('hidden');
            recordScreen.classList.add('hidden');
            updateStatus('‚úÖ Session ended');
        });
        
        updateStatus('Click the microphone to start');
    </script>

    <!-- DreamSeed Unified Navigation -->
    <script src="/components/unified-header.js"></script>
</body>
</html>